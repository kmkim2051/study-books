# [아이템 72] 표준 예외를 사용하라

예외 또한 재사용하는 것이 좋으며, 자바 라이브러리는 API가 쓰기 충분한 예외를 제공한다

### 표준 예외 재사용의 장점

- **API를 다른 사람이 익히고 사용하기 쉬워짐**
    - 많은 프로그래머에게 익숙한 규약을 따르기 때문
- **API를 사용한 프로그램도 낯선 예외를 사용하지 않아 읽기 쉬워짐**
- 예외 클래스 수가 적을수록 **메모리 사용량 및 클래스 로딩 시간이 감소**

### 다양한 표준 예외

**IllegalArgumentException**

가장 많이 재사용되는 예외

- 호출자가 인수로 부적절한 값을 넘길 때 던짐
- 예를 들면 반복 횟수 index에 음수

**IllegalStateException**

대상 객체의 상태가 호출된 메서드를 수행하기에 적합하지 않은 경우 던짐

- 초기화되지 않은 객체 사용 등

**특수한 예외 일부는 따로 구분해서 쓴다**

- null 허용하지 않는 메서드에 null을 건네는 경우 → `NullPointerException`
- 어떤 시퀀스의 허용 범위를 넘는 경우 → `IndexOutOfBoundsException`

**ConcurrentModificationException**

단일 스레드에서 사용하려고 설계한 객체를, 여러 스레드가 동시 수정하려 할 때 던짐

- 동시 수정을 확실히 검출할 안정된 방법은 없으니, 가능성 알려주는 정도의 역할

**UnsupportedOperationException**

클라이언트가 요청한 동작을, 대상 객체가 지원하지 않을 때 던짐

- 구현하려는 인터페이스 메서드 일부를 구현할 수 없을 때 사용
- 값을 넣을 수만 있는 List 구현체에 remove 호출 시

**Exception, RuntimeException, Throwable, Error는 직접 재사용하지 말자**

일종의 추상 클래스라고 생각하자. 다른 예외들의 상위 클래스이므로 안정적으로 테스트 할 수 없다.

**특별한 상황에서는 또 다른 예외를 재사용 할 수 있다.**

- 복소수, 유리수 → ArithmeticException, NumberFormatException

### 상황에 부합한다면 항상 표준 예외를 재사용하자

이때 API 문서를 참고해, 그 **예외가 어떤 상황에서 던져지는지** 꼭 확인

- 예외 이름 뿐 아니라 맥락까지 부합해야 재사용

더 많은 정보 제공을 원한다면, **표준 예외를 확장**하자

- 예외는 직렬화할 수 있다는 사실을 기억한다면, 커스텀 예외를 새로 만들지 않을 근거로 충분

표준 예외의 **‘주요 쓰임’은 상호 배타적이지 않으므로**, 재사용 예외 선택이 어려울 수 있음

- 카드 덱을 표현하는 객체 예시 - 카드 뽑기
- 덱에 남아있는 카드보다 큰 값을 넘긴다면?
    - 인수 값이 너무 크다고 판단 → IllegalArgumentException
    - 카드 수가 너무 작다고 판단 → IllegalStateException

**일반적인 규칙**

- 인수 값이 무엇이든 어차피 실패 → IllegalStateException
- 인수 값에 따라 달라진다면 → IllegalArgumentException