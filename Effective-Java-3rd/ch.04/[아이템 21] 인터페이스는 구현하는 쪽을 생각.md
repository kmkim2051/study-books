# [아이템 21] 인터페이스는 구현하는 쪽을 생각해 설계하라

**~자바 7**

모든 클래스가 ‘현재 인터페이스에 새로운 메서드가 추가될 일은 영원히 없다’고
가정하고 작성되었음

→ 디폴트 메서드는 구현체에 대해 아무것도 모른 채 합의 없이 무작정 ‘삽입’ 됨

**자바 8**

핵심 컬렉션 인터페이스에 람다를 활용하기 위한 다수의 디폴트 메서드가 추가됨

- 자바 라이브러리의 디폴트 메서드는 품질이 높고 범용적
- 일반적으로 모든 상황에서 불변식을 해치지 않는 디폴트 메서드 작성은 어려움
- 예시
    - 자바 8 Collection 인터페이스에 추가된 removeIf ↔ SynchronizedCollection
- 디폴트 메서드 재정의, 다른 메서드들에서 필요한 작업 수행하도록 조치

**디폴트 메서드는 컴파일에 성공하더라도, 런타임 오류를 일으킬 수 있다.**

기존 인터페이스에 디폴트 메서드를 추가하는 일은 꼭 필요한 경우가 아니라면 피할 것

**새로운 인터페이스를 만드는 경우는 표준 메서드 구현 제공을 위한 유용한 수단**

그 인터페이스를 더 쉽게 구현해 활용할 수 있게 해준다.

**디폴트 메서드는 인터페이스로부터 메서드를 제거하거나, 기존 메서드 시그니처를 수정하는 용도가 아님을 명심**

디폴트 메서드는 위험 발생 가능성이 크므로, 인터페이스 설계는 세심한 주의가 필요하다.

**새로운 인터페이스는 릴리즈 전 반드시 테스트를 거쳐야 한다.**

- 서로 다른 방식으로 최소한 세 가지는 구현해 봐야 함
- 해당 인스턴스를 활용하는 다양한 클라이언트도 구현해 봐야 함
- 릴리즈 후 결함 수정할 가능성에 절대 기대서는 안된다.