# [아이템 66] 네이티브 메서드는 신중히 사용하라

### 자바 네이티브 인터페이스(JNI)

자바 프로그램이 C, C++가 같은 네이티브 프로그래밍 언어로 작성된, **네이티브 메서드를 호출**하는 기술

### **네이티브 메서드의 주요 쓰임**

- 레지스트리 같은 플랫폼 특화 기능 사용
- 네이티브 코드로 작성된 기존 라이브러리 사용
    - 예시: 레거시 데이터를 사용하는 레거시 라이브러리
- 성능 개선을 목적으로, 성능에 결정적인 영향 부분만 네이티브 언어로 작성

플랫폼 특화 기능(OS 등) 활용하려면 네이티브 메서드를 사용해야 한다.

**자바가 성숙해지면서 하부 플랫폼 기능을 흡수중**

- 예시: 자바 9, process API가 추가되며 OS 프로세스에 접근 가능
- 대체할만한 자바 라이브러리가 없으면 네이티브 메서드를 써야 한다.

### 성능 개선을 위한 네이티브 메서드 사용

**(거의) 권장하지 않는다!**

- JVM이 급격히 발전하며, 네이티브 메서드보다 속도가 빠른 경우도 존재
- BigInteger의 예시
    - 자바 3이전에는 네이티브 메서드에 의존했으나 이후 발전하며 빨라짐
    - 다만 자바 8 이후 발전이 멈춰, GNU 다중 정밀 연산 라이브러리 등 고성능 연산이 필요하면 네이티브 메서드 사용을 고려

### 네이티브 메서드의 심각한 단점

- 네이티브 언어는 안전하지 않음
    - 네이티브 메서드 사용하는 애플리케이션도 메모리 훼손 오류 발생 가능
- 자바보다 플랫폼 이식성도 낮고, 디버깅도 어렵다.
- GC가 네이티브 메모리 자동 회수 못하고, 추적 불가
- 경계 이동 시 추가 비용
- 접착 코드로 인한 가독성 하락